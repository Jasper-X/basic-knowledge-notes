# 简述 Redis 中如何防止缓存雪崩和缓存击穿

## 缓存穿透

查询不存在的数据，缓存中查不到，请求会落到数据库，可能会把数据库打死。

- 应该在业务层的对不合法数据进行拦截；
- 重复率高的，对空值进行缓存，设置过期时间；
- 重复率低的，使用BloomFilter判断。

## 缓存击穿

大量请求同时查询一个热点key时，key正好失效了，导致大量请求落到数据库，可能会把数据库打死。

- 热点Key设置永不过期，或快过期时异步对数据进行更新
- 使用分布式锁，防止过多请求落到数据库

## 缓存雪崩

某一时刻发生大规模的缓存失效。

- 将不同的Key设置不同的过期时间