# 进程、线程和协程之间的区别

### 性质定义

进程是操作系统资源分配的最小单位，拥有自己独立的地址空间。

线程是CPU调度执行的最小单位，拥有自己的程序计数器、寄存器状态、栈，和同进程内的其他线程共享进程资源。

协程是用户态的轻量级线程，本质上是用户层面的执行流，调度和资源都由用户程序控制。



### 上下文切换成本

进程：切换页表，切换内核态堆栈，保存寄存器，CPU高速缓存失效，TLB缓存失效，特权模式切换

线程：切换内核态堆栈，保存寄存器，特权模式切换

协程：切换用户态堆栈，保存寄存器